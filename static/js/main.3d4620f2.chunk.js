(this["webpackJsonporca-test-task"]=this["webpackJsonporca-test-task"]||[]).push([[0],{1549:function(e,t,s){"use strict";s.r(t);var a=s(0),i=s.n(a),n=s(22),c=s.n(n),r=s(10),o=s(21),l=s(11),d=s(43),b=s(49);const j=window.alert;var u=(...e)=>{j(e.join(" "))},O=s(14),h=s(17);const p=Object(l.b)("tasks/set"),k=Object(l.b)("task/create"),m=Object(l.b)("tasks/fetch"),x=Object(l.b)("tasks/set/found"),f=Object(l.b)("tasks/find"),g=Object(l.b)("subTasks/fetch"),y=Object(l.b)("subTasks/set"),T=Object(l.b)("subTasks/set/found"),C=Object(l.b)("subTask/delete"),v=Object(l.b)("subTask/delete/success");var w=Object(l.c)({tasksList:[],foundTasksList:[],allSubTasks:{},foundSubTasksList:[]},(e=>{e.addCase(p,((e,{payload:t})=>({...e,tasksList:t}))).addCase(x,((e,{payload:t})=>({...e,foundTasksList:t}))),e.addCase(y,((e,{payload:t})=>({...e,allSubTasks:{...e.allSubTasks,[t.taskId]:t.subTasks}}))).addCase(T,((e,{payload:t})=>({...e,foundSubTasksList:t}))).addCase(C,(e=>({...e,foundTasksList:[],foundSubTasksList:[]})))}));const S=Object(O.a)();var I=Object(h.b)({router:Object(o.b)(S),tasks:w}),E=s(7),L=s(20),N=s.n(L);class B{constructor(e){this.key=null,this.key=e,localStorage.getItem(this.key)||localStorage.setItem(this.key,JSON.stringify([]))}get(){try{return JSON.parse(localStorage.getItem(this.key))}catch{return null}}set(e){localStorage.setItem(this.key,JSON.stringify(e))}}var A={tasks:new B("tasks"),subTasks:new B("subTasks")},F=e=>(...t)=>new Promise((s=>setTimeout((()=>s(e(...t))),1500)));const R=Array.from({length:10}).map((()=>N.a.lorem.word())),_=(e,t)=>Math.floor(Math.random()*(t-e+1))+e;var q=F((({title:e})=>{const t=A.tasks.get(),s=A.subTasks.get(),a={id:N.a.datatype.uuid(),createTime:Date.now(),title:e||N.a.lorem.sentence()},i=Array.from({length:_(1,10)}).map((()=>({id:N.a.datatype.uuid(),taskId:a.id,title:N.a.lorem.sentence(),labels:[...new Set(Array.from({length:_(1,5)}).map((()=>R[_(0,9)])))]})));return A.tasks.set([...t,a]),A.subTasks.set([...s,...i]),a})),M=F((()=>A.tasks.get())),P=F((e=>{const t=A.tasks.get(),s=A.tasks.get().find((t=>t.id===e));if(!s)throw new Error(`Task ${e} wasn't found`);return A.tasks.set([...t.filter((t=>t.id!==e))]),s})),D=F((e=>{const t=A.tasks.get(),s=e.toLowerCase();return t.filter((e=>e.title.toLowerCase().includes(s)))}));const z=e=>e.tasks.tasksList,J=e=>e.tasks.foundTasksList,$=e=>e.tasks.foundSubTasksList,U=(e,t)=>e.tasks.allSubTasks[t]||[];function*Y(){const e=yield Object(E.b)(M);yield Object(E.c)(p(e))}function*V({payload:e}){const t=yield Object(E.b)(D,e);yield Object(E.c)(x(t))}function*W({payload:e}){yield Object(E.b)(q,e),yield Object(E.b)(Y)}function*G({payload:e}){try{yield Object(E.b)(P,e),yield Object(E.b)(Y)}catch(t){u("Delete task failed:",t)}}function*H({payload:e}){const{taskId:t,id:s}=e;((e,t)=>!t.length||1===t.length&&!!t.find((({id:t})=>t===e)))(s,yield Object(E.d)(U,t))&&(yield Object(E.b)(G,{payload:t}))}function*K(){yield Object(E.f)(m,Y),yield Object(E.e)(k,W),yield Object(E.e)(f,V),yield Object(E.e)(v,H)}var Q=F((e=>{const t=A.subTasks.get(),s=t.find((t=>t.id===e));if(s)return A.subTasks.set(t.filter((t=>t.id!==e))),s;throw new Error(`SubTask [${e}] not found`)})),X=F((e=>A.subTasks.get().filter((t=>t.taskId===e)))),Z=F((e=>{const t=A.subTasks.get(),s=e.toLowerCase();return t.filter((e=>e.title.toLowerCase().includes(s)))}));function*ee({payload:e}){const t=yield Object(E.b)(X,e);yield Object(E.c)(y({taskId:e,subTasks:t}))}function*te({payload:e}){const t=yield Object(E.b)(Z,e);yield Object(E.c)(T(t))}function*se({payload:e}){try{const{id:t,taskId:s}=e;yield Object(E.b)(Q,t),yield Object(E.c)(v(e)),yield Object(E.b)(ee,{payload:s})}catch(t){u("Delete subTask request failed:",t)}}function*ae(){yield Object(E.e)(g,ee),yield Object(E.e)(C,se),yield Object(E.e)(f,te)}function*ie(){yield Object(E.b)(Y)}const ne=Object(d.a)(S),ce=Object(b.a)({onError:(e,{sagaStack:t})=>{u("Something came up",e,t)}}),re=[...Object(l.d)({thunk:!1,serializableCheck:!1,immutableCheck:{warnAfter:300}}),ne,ce],oe=Object(l.a)({reducer:I,middleware:re,enhancers:[],preloadedState:{},devTools:{trace:!0}});ce.run((function*(){yield Object(E.f)("app/init",ie),yield Object(E.a)([K(),ae()])}));var le=oe,de=s(9);const be=()=>"/";var je=s(8);const ue=je.b.div.withConfig({displayName:"BorderedCenterArea"})(["width:500px;margin:20px auto;padding:20px;max-width:100%;border:1px dashed #a5a2a2;"]);var Oe=s(1);var he=({children:e})=>Object(Oe.jsx)(ue,{children:e}),pe=s(5),ke=s.n(pe);const me=je.b.button.withConfig({displayName:"Wrapper"})(["padding:4px 6px;height:fit-content;border-radius:1em;background-color:#96fbe4;border:none;&.yellow-button{background-color:#ffe082;}"]);var xe=e=>Object(Oe.jsx)(me,{...e});const fe={CREATE_TIME:"BY_CREATE_TIME",TITLE:"BY_TITLE"},ge=Object(je.b)(xe).withConfig({displayName:"SortButton"})(["margin-right:5px;"]),ye={[fe.CREATE_TIME]:"Sort by create-date",[fe.TITLE]:"Sort by title"};var Te=({sortType:e,sortBy:t})=>{const s=Object(a.useCallback)((()=>t(e)),[t,e]);return Object(Oe.jsx)(ge,{className:"yellow-button",onClick:s,children:ye[e]})};const Ce=je.b.input.attrs({type:"text"}).withConfig({displayName:"Input"})(["border-radius:1em;border:1px solid #656565;padding:2px 5px;"]),ve=({value:e,placeholder:t,onValueChange:s})=>{const[i,n]=Object(a.useState)(e),c=Object(a.useCallback)((e=>{n(e.target.value),s(e.target.value)}),[s]);return Object(a.useEffect)((()=>n(e)),[e]),Object(Oe.jsx)(Ce,{placeholder:t,value:i,onChange:c})};ve.defaultProps={value:"",placeholder:""};var we=ve;var Se=()=>Object(Oe.jsx)("h1",{children:"Processes"});const Ie=je.b.ul.withConfig({displayName:"ListContainter"})(["margin-left:10px;margin-bottom:5px;.item{margin-bottom:5px;}"]);var Ee=({items:e,ItemComponent:t})=>Object(Oe.jsx)(Ie,{children:e.map((e=>Object(Oe.jsx)("li",{children:Object(Oe.jsx)(t,{...e})},e.id)))});var Le=({title:e})=>Object(Oe.jsx)(Oe.Fragment,{children:Object(Oe.jsx)("div",{children:e})});const Ne=je.b.input.attrs({type:"checkbox"}).withConfig({displayName:"Checkbox"})(["margin-right:5px;"]),Be=({onCheck:e,isUncheckable:t})=>{const[s,i]=Object(a.useState)(!1),n=Object(a.useCallback)((()=>{s||e(),i((e=>!!t||!e))}),[e,s,t]);return Object(Oe.jsx)(Ne,{onClick:n,checked:s})};Be.defaultProps={isUncheckable:!1};var Ae=Be;const Fe=je.b.li.withConfig({displayName:"Label"})(["display:inline-block;margin-right:5px;padding:0 5px;border-radius:1em;background-color:#9c9cc7;color:#fff;"]),Re=je.b.ul.withConfig({displayName:"LabelsList"})(["margin:3px 0 10px;"]),_e=({id:e,title:t,labels:s,taskId:i})=>{const n=Object(r.d)(),c=Object(a.useCallback)((()=>n(C({id:e,taskId:i}))),[n,e,i]);return Object(Oe.jsxs)("span",{children:[Object(Oe.jsx)(Ae,{onCheck:c,isUncheckable:!0}),Object(Oe.jsx)("span",{id:e,children:t}),Object(Oe.jsx)(Re,{children:s.map((e=>Object(Oe.jsxs)(Fe,{className:"label",children:["#",e]},e)))})]})};_e.defaultProps={labels:[]};ke.a.string.isRequired,ke.a.string.isRequired,ke.a.string.isRequired,ke.a.arrayOf(ke.a.string);var qe=_e;var Me=({taskId:e})=>{const t=Object(r.e)((t=>U(t,e)));return Object(Oe.jsx)(Ee,{items:t,ItemComponent:qe})};const Pe=e=>{const t=new Date(e);return`${t.toLocaleDateString()} ${t.toLocaleTimeString()}`},De=je.b.div.withConfig({displayName:"TaskWrapper"})(["display:flex;justify-content:space-between;"]),ze=je.b.span.withConfig({displayName:"TaskName"})(["flex-basis:40%;max-width:40%;overflow:hidden;text-overflow:ellipsis;"]);ke.a.string.isRequired,ke.a.string.isRequired,ke.a.number.isRequired;var Je=({title:e,id:t,createTime:s})=>{const i=Object(r.d)(),n=Object(a.useCallback)((()=>i(g(t))),[t,i]);return Object(Oe.jsxs)(Oe.Fragment,{children:[Object(Oe.jsxs)(De,{children:[Object(Oe.jsx)(ze,{children:e}),Object(Oe.jsx)("span",{children:Pe(s)}),Object(Oe.jsx)(xe,{onClick:n,children:"Expand"})]}),Object(Oe.jsx)(Me,{taskId:t})]})};const $e=je.b.div.withConfig({displayName:"TaskTitle"})(["color:#808080;font-style:italic;font-size:0.9em;"]),Ue=je.b.div.withConfig({displayName:"SubTaskTitle"})(["margin-left:10px;"]);var Ye=({title:e,taskId:t})=>{const s=Object(r.e)((e=>((e,t)=>e.tasks.tasksList.find((e=>e.id===t)))(e,t)));return Object(Oe.jsxs)("section",{children:[Object(Oe.jsxs)($e,{children:[s.title,": "]}),Object(Oe.jsx)(Ue,{children:e})]})};const Ve=je.b.div.withConfig({displayName:"ButtonContainer"})(["margin:5px 0;"]);var We=({sortBy:e})=>Object(Oe.jsx)(Ve,{children:Object.values(fe).map((t=>Object(Oe.jsx)(Te,{sortBy:e,sortType:t},t)))});const Ge={[fe.CREATE_TIME]:(e,t)=>e.createTime-t.createTime,[fe.TITLE]:(e,t)=>e.title<t.title?-1:1};var He=e=>{const[t,s]=Object(a.useState)(fe.BY_CREATE_DATE);return{sortedItems:((e,t)=>{const s=[...e];return s.sort(Ge[t]),s})(e,t),sortBy:s}};var Ke=()=>{const e=Object(r.e)(z),{sortedItems:t,sortBy:s}=He(e);return Object(Oe.jsxs)(Oe.Fragment,{children:[Object(Oe.jsx)(We,{sortBy:s}),Object(Oe.jsx)(Ee,{items:t,ItemComponent:Je})]})};var Qe=()=>{const e=Object(r.e)($);return Object(Oe.jsxs)(Oe.Fragment,{children:[e.length>0&&Object(Oe.jsx)("h3",{children:"Found SubTasks:"}),Object(Oe.jsx)(Ee,{items:e,ItemComponent:Ye})]})};var Xe=()=>{const e=Object(r.e)(J);return Object(Oe.jsxs)(Oe.Fragment,{children:[e.length>0&&Object(Oe.jsx)("h3",{children:"Found tasks:"}),Object(Oe.jsx)(Ee,{items:e,ItemComponent:Le})]})};const Ze=je.b.div.withConfig({displayName:"TaskFormContainer"})(["& button{margin-left:5px;}"]),et=({title:e})=>{const[t,s]=Object(a.useState)(e),i=Object(r.d)(),n=Object(a.useCallback)((()=>{i(k({title:t})),s("")}),[t,i]),c=Object(a.useCallback)((()=>{i(f(t)),s("")}),[t,i]);return Object(Oe.jsxs)(Ze,{children:[Object(Oe.jsx)(we,{value:t,placeholder:"task title",onValueChange:s}),Object(Oe.jsx)(xe,{onClick:n,children:"Create"}),Object(Oe.jsx)(xe,{onClick:c,children:"Search"})]})};et.defaultProps={title:""};var tt=et;const st=je.b.section.withConfig({displayName:"FoundSection"})(["margin:10px 0;"]);var at=()=>Object(Oe.jsxs)(st,{children:[Object(Oe.jsx)(Xe,{}),Object(Oe.jsx)(Qe,{})]});var it=()=>Object(Oe.jsxs)(Oe.Fragment,{children:[Object(Oe.jsx)(Se,{}),Object(Oe.jsxs)("main",{children:[Object(Oe.jsx)(tt,{}),Object(Oe.jsx)(at,{}),Object(Oe.jsx)(Ke,{})]})]});var nt=()=>Object(Oe.jsx)(he,{children:Object(Oe.jsx)(it,{})}),ct=s(26);var rt=()=>Object(Oe.jsxs)(he,{children:[Object(Oe.jsx)("h1",{children:"Page not found"}),Object(Oe.jsx)(ct.a,{to:be(),children:"Go to home"})]});var ot=()=>Object(Oe.jsxs)(de.c,{children:[Object(Oe.jsx)(de.a,{path:be(),component:nt}),Object(Oe.jsx)(de.a,{component:rt})]}),lt=Object(je.a)(["*{padding:0;margin:0;outline:none;&,&:before,&:after{box-sizing:border-box;}}body{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:'Helvetica',sans-serif;font-weight:400;font-size:14px;line-height:1.4;}a{text-decoration:none;&,&:hover{color:inherit;}}p{margin:0;}ul,ol{margin:0;list-style:none;}img{max-width:100%;}h1,h2,h3,h4,h5,h6{margin:0;}pre{margin:0;}#root{height:100vh;display:flex;flex-direction:column;}"]);var dt=()=>(Object(a.useEffect)((()=>{le.dispatch({type:"app/init"})}),[]),Object(Oe.jsxs)(Oe.Fragment,{children:[Object(Oe.jsx)(lt,{}),Object(Oe.jsx)(r.a,{store:le,children:Object(Oe.jsx)(o.a,{history:S,children:Object(Oe.jsx)(ot,{})})})]}));window.logError=alert,c.a.render(Object(Oe.jsx)(i.a.StrictMode,{children:Object(Oe.jsx)(dt,{})}),document.getElementById("root"))}},[[1549,1,2]]]);
//# sourceMappingURL=main.3d4620f2.chunk.js.map