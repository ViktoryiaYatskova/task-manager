(this["webpackJsonporca-test-task"]=this["webpackJsonporca-test-task"]||[]).push([[0],{1556:function(e,t,s){"use strict";s.r(t);var a=s(0),c=s.n(a),r=s(21),i=s.n(r),n=s(11),o=s(20),l=s(8),b=s(45),d=s(51);const j=window.alert;var u=(...e)=>{j(e.join(" "))},O=s(14),h=s(17);const p=Object(l.b)("tasks/set"),y=Object(l.b)("task/create"),k=Object(l.b)("tasks/fetch"),f=Object(l.b)("tasks/set/found"),m=Object(l.b)("tasks/reset/found");var g=Object(l.c)({tasksList:[],foundTasksList:[]},(e=>{e.addCase(p,((e,{payload:t})=>({...e,tasksList:t}))).addCase(f,((e,{payload:t})=>({...e,foundTasksList:t}))).addCase(m,(e=>({...e,foundTasksList:[]})))}));const x=(...e)=>[...new Set(e)],T=Object(l.b)("app/mode"),C=Object(l.b)("app/searchItems"),v=Object(l.b)("subTasks/fetch"),w=Object(l.b)("subTasks/set"),S=Object(l.b)("subTasks/set/found"),I=Object(l.b)("subTask/reset/found"),L=Object(l.b)("subTask/delete"),E=Object(l.b)("subTask/delete/success"),N=Object(l.b)("subTask/search:byLabel");var B=Object(l.c)({allSubTasks:{},foundSubTasksList:[],filters:[]},(e=>{e.addCase(w,((e,{payload:t})=>({...e,allSubTasks:{...e.allSubTasks,[t.taskId]:t.subTasks}}))).addCase(S,((e,{payload:t})=>({...e,foundSubTasksList:t}))).addCase(I,(e=>({...e,foundSubTasksList:[]}))).addCase(N,((e,{payload:t})=>({...e,filters:x(...e.filters,t)}))).addCase(T,((e,{payload:t})=>({...e,filters:t?[]:e.filters})))}));var M=Object(l.c)({isSearchMode:!1,searchQuery:""},(e=>{e.addCase(N,(e=>({...e,isSearchMode:!0,searchQuery:""}))).addCase(T,((e,{payload:t})=>({...e,isSearchMode:t,searchQuery:t?e.searchQuery:""}))).addCase(C,((e,{payload:t})=>({...e,searchQuery:t})))}));const R=Object(O.a)();var A=Object(h.b)({router:Object(o.b)(R),tasks:g,subTasks:B,app:M}),q=s(7),P=s(19),_=s.n(P);class D{constructor(e){this.key=null,this.key=e,localStorage.getItem(this.key)||localStorage.setItem(this.key,JSON.stringify([]))}get(){try{return JSON.parse(localStorage.getItem(this.key))}catch{return null}}set(e){localStorage.setItem(this.key,JSON.stringify(e))}}var F={tasks:new D("tasks"),subTasks:new D("subTasks")},Q=e=>(...t)=>new Promise((s=>setTimeout((()=>s(e(...t))),1500)));const J=Array.from({length:10}).map((()=>_.a.lorem.word())),$=(e,t)=>Math.floor(Math.random()*(t-e+1))+e;var z=Q((({title:e})=>{const t=F.tasks.get(),s=F.subTasks.get(),a={id:_.a.datatype.uuid(),createTime:Date.now(),title:e||_.a.lorem.sentence()},c=Array.from({length:$(1,10)}).map((()=>({id:_.a.datatype.uuid(),taskId:a.id,title:_.a.lorem.sentence(),labels:[...new Set(Array.from({length:$(1,5)}).map((()=>J[$(0,9)])))]})));return F.tasks.set([...t,a]),F.subTasks.set([...s,...c]),a})),U=Q((()=>F.tasks.get())),V=Q((e=>{const t=F.tasks.get(),s=F.tasks.get().find((t=>t.id===e));if(!s)throw new Error(`Task ${e} wasn't found`);return F.tasks.set([...t.filter((t=>t.id!==e))]),s})),W=Q((e=>{const t=F.tasks.get(),s=e.toLowerCase();return t.filter((e=>e.title.toLowerCase().includes(s)))})),Y=s(23);const G=e=>e.app.isSearchMode,H=e=>e.app.searchQuery,K=e=>e.subTasks.foundSubTasksList,X=e=>e.subTasks.filters,Z=(e,t)=>e.subTasks.allSubTasks[t]||[],ee=e=>Object(Y.a)(G,(e=>Object(Y.a)(K,(t=>t.filter((t=>t.taskId===e)))))(e),(t=>Z(t,e)),((e,t,s)=>e?t:s));function*te(){const e=yield Object(q.b)(U);yield Object(q.c)(p(e))}function*se({payload:e}){const t=yield Object(q.b)(W,e);yield Object(q.c)(f(t))}function*ae({payload:e}){yield Object(q.b)(z,e),yield Object(q.b)(te)}function*ce({payload:e}){try{yield Object(q.b)(V,e),yield Object(q.b)(te)}catch(t){u("Delete task failed:",t)}}function*re({payload:e}){const{taskId:t,id:s}=e;((e,t)=>!t.length||1===t.length&&t.some((({id:t})=>t===e)))(s,yield Object(q.d)(Z,t))&&(yield Object(q.b)(ce,{payload:t}))}function*ie(){yield Object(q.f)(k.type,te),yield Object(q.e)(y.type,ae),yield Object(q.f)(C.type,se),yield Object(q.e)(E.type,re)}var ne=Q((e=>{const t=F.subTasks.get(),s=t.find((t=>t.id===e));if(s)return F.subTasks.set(t.filter((t=>t.id!==e))),s;throw new Error(`SubTask [${e}] not found`)})),oe=Q((e=>F.subTasks.get().filter((t=>t.taskId===e)))),le=Q((e=>{const t=F.subTasks.get(),s=e.toLowerCase();return t.filter((e=>e.title.toLowerCase().includes(s)))})),be=Q((e=>{try{const t=F.subTasks.get();return e.reduce(((e,t)=>{const s=t.toLowerCase();return e.filter((e=>e.labels.some((e=>e.toLowerCase()===s))))}),t)}catch(t){return u("findSubTasksByLabel",t),F.subTasks.get()}}));function*de({payload:e}){const t=yield Object(q.b)(oe,e);yield Object(q.c)(w({taskId:e,subTasks:t}))}function*je({payload:e}){const t=yield Object(q.b)(le,e);yield Object(q.c)(S(t))}function*ue(){try{const e=yield Object(q.d)(X),t=yield Object(q.b)(be,e);yield Object(q.c)(S(t))}catch(e){u("Delete subTask request failed:",e)}}function*Oe({payload:e}){try{const{id:t,taskId:s}=e;yield Object(q.b)(ne,t),yield Object(q.c)(E(e)),yield Object(q.b)(de,{payload:s})}catch(t){u("Delete subTask request failed:",t)}}function*he(){yield Object(q.e)(v.type,de),yield Object(q.e)(L.type,Oe),yield Object(q.f)(C.type,je),yield Object(q.f)(N.type,ue)}function*pe(){yield Object(q.b)(te)}const ye=Object(b.a)(R),ke=Object(d.a)({onError:(e,{sagaStack:t})=>{u("Something came up",e,t)}}),fe=[...Object(l.d)({thunk:!1,serializableCheck:!1,immutableCheck:{warnAfter:300}}),ye,ke],me=Object(l.a)({reducer:A,middleware:fe,enhancers:[],preloadedState:{},devTools:{trace:!0}});ke.run((function*(){yield Object(q.f)("app/init",pe),yield Object(q.a)([ie(),he()])}));var ge=me,xe=s(9);const Te=()=>"/";var Ce=s(10);const ve=Ce.b.div.withConfig({displayName:"BorderedCenterArea"})(["width:500px;margin:20px auto;padding:20px;max-width:100%;border:1px dashed #a5a2a2;"]);var we=s(2);var Se=({children:e})=>Object(we.jsx)(ve,{children:e}),Ie=s(5),Le=s.n(Ie);const Ee=Ce.b.button.withConfig({displayName:"Wrapper"})(["padding:4px 6px;height:fit-content;border-radius:1em;background-color:#96fbe4;border:none;&.yellow-button{background-color:#ffe082;}&.purple-button{background-color:#9c9cc7;color:#fff;}"]);var Ne=e=>Object(we.jsx)(Ee,{...e});const Be={CREATE_TIME:"BY_CREATE_TIME",TITLE:"BY_TITLE"},Me=Object(Ce.b)(Ne).withConfig({displayName:"SortButton"})(["margin-right:5px;"]),Re={[Be.CREATE_TIME]:"Sort by create-date",[Be.TITLE]:"Sort by title"};var Ae=({sortType:e,sortBy:t})=>{const s=Object(a.useCallback)((()=>t(e)),[t,e]);return Object(we.jsx)(Me,{className:"yellow-button",onClick:s,children:Re[e]})};const qe=Ce.b.input.attrs({type:"text"}).withConfig({displayName:"Input"})(["border-radius:1em;border:1px solid #656565;padding:2px 5px;"]),Pe=({value:e,placeholder:t,onValueChange:s})=>{const[c,r]=Object(a.useState)(e),i=Object(a.useCallback)((e=>{r(e.target.value),s(e.target.value)}),[s]);return Object(a.useEffect)((()=>r(e)),[e]),Object(we.jsx)(qe,{placeholder:t,value:c,onChange:i})};Pe.defaultProps={value:"",placeholder:""};var _e=Pe;var De=()=>Object(we.jsx)("h1",{children:"Processes"});const Fe=Ce.b.ul.withConfig({displayName:"ListContainter"})(["margin-left:10px;margin-bottom:5px;.item{margin-bottom:5px;}"]);var Qe=({items:e,ItemComponent:t})=>Object(we.jsx)(Fe,{children:e.map((e=>Object(we.jsx)("li",{children:Object(we.jsx)(t,{...e})},e.id)))});const Je=Ce.b.input.attrs({type:"checkbox"}).withConfig({displayName:"Checkbox"})(["margin-right:5px;"]),$e=({onCheck:e,isUncheckable:t})=>{const[s,c]=Object(a.useState)(!1),r=Object(a.useCallback)((()=>{s||e(),c((e=>!!t||!e))}),[e,s,t]);return Object(we.jsx)(Je,{onChange:r,checked:s})};$e.defaultProps={isUncheckable:!1};var ze=$e;var Ue=({children:e})=>{const t=Object(n.e)(H),s=new RegExp(`(${t})`,"gi"),a=e.split(s);return t?Object(we.jsx)(we.Fragment,{children:a.map(((e,t)=>{const a=s.test(e);return Object(we.jsx)(c.a.Fragment,{children:a?Object(we.jsx)("mark",{children:e}):e},t)}))}):e};const Ve=Ce.b.div.withConfig({displayName:"ButtonContainer"})(["margin:5px 0;"]);var We=({sortBy:e})=>Object(we.jsx)(Ve,{children:Object.values(Be).map((t=>Object(we.jsx)(Ae,{sortBy:e,sortType:t},t)))});const Ye=Object(Ce.b)(Ne).withConfig({displayName:"LabelStyled"})(["padding:0 5px;"]),Ge=Ce.b.ul.withConfig({displayName:"LabelsListContainer"})(["margin:3px 0 10px;& > li{display:inline-block;margin-right:5px;}"]),He=Ce.b.li.withConfig({displayName:"LabelListItem"})(["display:inline-block;margin-right:5px;"]),Ke=({label:e})=>{const t=Object(n.d)(),s=Object(a.useCallback)((()=>t(N(e))),[t,N,e]);return Object(we.jsxs)(Ye,{className:"label purple-button",onClick:s,children:["#",e]})},Xe=({labels:e})=>Object(we.jsx)(Ge,{children:e.map((e=>Object(we.jsx)(He,{children:Object(we.jsx)(Ke,{label:e})},e)))});Xe.defaultProps={labels:[]};var Ze=Xe;const et=({id:e,title:t,labels:s,taskId:c})=>{const r=Object(n.d)(),i=Object(a.useCallback)((()=>r(L({id:e,taskId:c}))),[r,e,c]);return Object(we.jsxs)("span",{children:[Object(we.jsx)(ze,{onCheck:i,isUncheckable:!0}),Object(we.jsx)("span",{id:e,children:Object(we.jsx)(Ue,{children:t})}),Object(we.jsx)(Ze,{labels:s})]})};et.defaultProps={labels:[]};Le.a.string.isRequired,Le.a.string.isRequired,Le.a.string.isRequired,Le.a.arrayOf(Le.a.string);var tt=et;var st=({taskId:e})=>{const t=((e,t)=>{const s=Object(a.useCallback)(e(...t),[e,...t]);return Object(n.e)(s)})(ee,[e]);return Object(we.jsx)(Qe,{items:t,ItemComponent:tt})};const at=e=>{const t=new Date(e);return`${t.toLocaleDateString()} ${t.toLocaleTimeString()}`},ct=(e,t,s)=>e.filter((e=>(e=>{return t=e,a="id",s.find((e=>e[a]===t[a]));var t,a})(e.id)||((e,t)=>e.find((e=>e.taskId===t)))(t,e.id))),rt=Ce.b.div.withConfig({displayName:"TaskWrapper"})(["display:flex;justify-content:space-between;"]),it=Ce.b.span.withConfig({displayName:"TaskName"})(["flex-basis:40%;max-width:40%;overflow:hidden;text-overflow:ellipsis;"]);Le.a.string.isRequired,Le.a.string.isRequired,Le.a.number.isRequired;var nt=({title:e,id:t,createTime:s})=>{const c=Object(n.d)(),r=Object(a.useCallback)((()=>c(v(t))),[t,c]);return Object(we.jsxs)(we.Fragment,{children:[Object(we.jsxs)(rt,{children:[Object(we.jsx)(it,{children:Object(we.jsx)(Ue,{children:e})}),Object(we.jsx)("span",{children:at(s)}),Object(we.jsx)(Ne,{onClick:r,children:"Expand"})]}),Object(we.jsx)(st,{taskId:t})]})};const ot=Object(Y.a)(G,(e=>e.tasks.tasksList),(e=>e.tasks.foundTasksList),K,((e,t,s,a)=>e?ct(t,a,s):t)),lt={[Be.CREATE_TIME]:(e,t)=>e.createTime-t.createTime,[Be.TITLE]:(e,t)=>e.title<t.title?-1:1};var bt=e=>{const[t,s]=Object(a.useState)(Be.CREATE_TIME);return{sortedItems:((e,t)=>{const s=[...e];return s.sort(lt[t]),s})(e,t),sortBy:s}};var dt=()=>{const e=Object(n.e)(ot),{sortedItems:t,sortBy:s}=bt(e);return Object(we.jsxs)("section",{children:[Object(we.jsx)(We,{sortBy:s}),Object(we.jsx)(Qe,{items:t,ItemComponent:nt})]})};var jt=()=>{const e=Object(n.e)(X);return Object(we.jsx)("div",{children:Object(we.jsx)(Ze,{labels:e})})};const ut=Ce.b.section.withConfig({displayName:"TaskFormContainer"})(["& button{margin-left:5px;}"]),Ot=({title:e})=>{const[t,s]=Object(a.useState)(e),c=Object(n.d)(),r=Object(n.e)(G),i=Object(a.useCallback)((()=>{c(y({title:t})),s("")}),[t,c]),o=Object(a.useCallback)((()=>{r?s(""):c(C(t)),c(T(!r))}),[c,r,t]),l=Object(a.useCallback)((e=>{s(e),r&&c(C(e))}),[r,c]);return Object(we.jsxs)(ut,{children:[Object(we.jsx)(_e,{value:t,placeholder:"task title",onValueChange:l}),!r&&Object(we.jsx)(Ne,{onClick:i,children:"Create"}),Object(we.jsx)(Ne,{onClick:o,children:r?"Exit Search":"Start Search"}),Object(we.jsx)(jt,{})]})};Ot.defaultProps={title:""};var ht=Ot;var pt=()=>Object(we.jsxs)(we.Fragment,{children:[Object(we.jsx)(De,{}),Object(we.jsxs)("main",{children:[Object(we.jsx)(ht,{}),Object(we.jsx)(dt,{})]})]});var yt=()=>Object(we.jsx)(Se,{children:Object(we.jsx)(pt,{})}),kt=s(26);var ft=()=>Object(we.jsxs)(Se,{children:[Object(we.jsx)("h1",{children:"Page not found"}),Object(we.jsx)(kt.a,{to:Te(),children:"Go to home"})]});var mt=()=>Object(we.jsxs)(xe.c,{children:[Object(we.jsx)(xe.a,{path:Te(),component:yt}),Object(we.jsx)(xe.a,{component:ft})]}),gt=Ce.a`
  * {
    padding: 0;
    margin: 0;
    outline: none;

    &,
    &:before,
    &:after {
      box-sizing: border-box;
    }
  }

  body {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-family: 'Helvetica', sans-serif;
    font-weight: 400;
    font-size: 14px;
    line-height: 1.4;
  }

  a {
    text-decoration: none;

    &,
    &:hover {
      color: inherit;
    }
  }

  p {
    margin: 0;
  }

  ul,
  ol {
    margin: 0;
    list-style: none;
  }

  img {
    max-width: 100%;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    margin: 0;
  }

  pre {
    margin: 0;
  }

  #root {
    height: 100vh;
    display: flex;
    flex-direction: column;
  }
`;var xt=()=>(Object(a.useEffect)((()=>{ge.dispatch({type:"app/init"})}),[]),Object(we.jsxs)(we.Fragment,{children:[Object(we.jsx)(gt,{}),Object(we.jsx)(n.a,{store:ge,children:Object(we.jsx)(o.a,{history:R,children:Object(we.jsx)(mt,{})})})]}));window.logError=alert,i.a.render(Object(we.jsx)(c.a.StrictMode,{children:Object(we.jsx)(xt,{})}),document.getElementById("root"))}},[[1556,1,2]]]);
//# sourceMappingURL=main.31b78459.chunk.js.map