(this["webpackJsonporca-test-task"]=this["webpackJsonporca-test-task"]||[]).push([[0],{1550:function(e,t,s){"use strict";s.r(t);var a=s(0),c=s.n(a),r=s(22),n=s.n(r),i=s(11),o=s(21),l=s(8),d=s(44),b=s(50);const j=window.alert;var u=(...e)=>{j(e.join(" "))},h=s(14),O=s(17);const p=Object(l.b)("tasks/set"),k=Object(l.b)("task/create"),y=Object(l.b)("tasks/fetch"),f=Object(l.b)("tasks/set/found"),m=Object(l.b)("tasks/reset/found");var g=Object(l.c)({tasksList:[],foundTasksList:[]},(e=>{e.addCase(p,((e,{payload:t})=>({...e,tasksList:t}))).addCase(f,((e,{payload:t})=>({...e,foundTasksList:t}))).addCase(m,(e=>({...e,foundTasksList:[]})))}));const x=Object(l.b)("subTasks/fetch"),T=Object(l.b)("subTasks/set"),C=Object(l.b)("subTasks/set/found"),v=Object(l.b)("subTask/reset/found"),w=Object(l.b)("subTask/delete"),S=Object(l.b)("subTask/delete/success");var I=Object(l.c)({allSubTasks:{},foundSubTasksList:[]},(e=>{e.addCase(T,((e,{payload:t})=>({...e,allSubTasks:{...e.allSubTasks,[t.taskId]:t.subTasks}}))).addCase(C,((e,{payload:t})=>({...e,foundSubTasksList:t}))).addCase(v,(e=>({...e,foundSubTasksList:[]})))}));const E=Object(l.b)("app/mode"),L=Object(l.b)("app/searchItems");var N=Object(l.c)({isSearchMode:!1,searchQuery:""},(e=>{e.addCase(E,((e,{payload:t})=>({...e,isSearchMode:t,searchQuery:t?e.searchQuery:""}))).addCase(L,((e,{payload:t})=>({...e,searchQuery:t})))}));const B=Object(h.a)();var R=Object(O.b)({router:Object(o.b)(B),tasks:g,subTasks:I,app:N}),M=s(7),A=s(20),q=s.n(A);class F{constructor(e){this.key=null,this.key=e,localStorage.getItem(this.key)||localStorage.setItem(this.key,JSON.stringify([]))}get(){try{return JSON.parse(localStorage.getItem(this.key))}catch{return null}}set(e){localStorage.setItem(this.key,JSON.stringify(e))}}var P={tasks:new F("tasks"),subTasks:new F("subTasks")},_=e=>(...t)=>new Promise((s=>setTimeout((()=>s(e(...t))),1500)));const D=Array.from({length:10}).map((()=>q.a.lorem.word())),J=(e,t)=>Math.floor(Math.random()*(t-e+1))+e;var Q=_((({title:e})=>{const t=P.tasks.get(),s=P.subTasks.get(),a={id:q.a.datatype.uuid(),createTime:Date.now(),title:e||q.a.lorem.sentence()},c=Array.from({length:J(1,10)}).map((()=>({id:q.a.datatype.uuid(),taskId:a.id,title:q.a.lorem.sentence(),labels:[...new Set(Array.from({length:J(1,5)}).map((()=>D[J(0,9)])))]})));return P.tasks.set([...t,a]),P.subTasks.set([...s,...c]),a})),$=_((()=>P.tasks.get())),z=_((e=>{const t=P.tasks.get(),s=P.tasks.get().find((t=>t.id===e));if(!s)throw new Error(`Task ${e} wasn't found`);return P.tasks.set([...t.filter((t=>t.id!==e))]),s})),U=_((e=>{const t=P.tasks.get(),s=e.toLowerCase();return t.filter((e=>e.title.toLowerCase().includes(s)))})),V=s(24);const W=e=>e.app.isSearchMode,Y=e=>e.app.searchQuery,G=e=>e.subTasks.foundSubTasksList,H=(e,t)=>e.subTasks.allSubTasks[t]||[],K=e=>Object(V.a)(W,(e=>Object(V.a)(G,(t=>t.filter((t=>t.taskId===e)))))(e),(t=>H(t,e)),((e,t,s)=>e?t:s));function*X(){const e=yield Object(M.b)($);yield Object(M.c)(p(e))}function*Z({payload:e}){const t=yield Object(M.b)(U,e);yield Object(M.c)(f(t))}function*ee({payload:e}){yield Object(M.b)(Q,e),yield Object(M.b)(X)}function*te({payload:e}){try{yield Object(M.b)(z,e),yield Object(M.b)(X)}catch(t){u("Delete task failed:",t)}}function*se({payload:e}){const{taskId:t,id:s}=e;((e,t)=>!t.length||1===t.length&&!!t.find((({id:t})=>t===e)))(s,yield Object(M.d)(H,t))&&(yield Object(M.b)(te,{payload:t}))}function*ae(){yield Object(M.f)(y.type,X),yield Object(M.e)(k.type,ee),yield Object(M.f)(L.type,Z),yield Object(M.e)(S.type,se)}var ce=_((e=>{const t=P.subTasks.get(),s=t.find((t=>t.id===e));if(s)return P.subTasks.set(t.filter((t=>t.id!==e))),s;throw new Error(`SubTask [${e}] not found`)})),re=_((e=>P.subTasks.get().filter((t=>t.taskId===e)))),ne=_((e=>{const t=P.subTasks.get(),s=e.toLowerCase();return t.filter((e=>e.title.toLowerCase().includes(s)))}));function*ie({payload:e}){const t=yield Object(M.b)(re,e);yield Object(M.c)(T({taskId:e,subTasks:t}))}function*oe({payload:e}){const t=yield Object(M.b)(ne,e);yield Object(M.c)(C(t))}function*le({payload:e}){try{const{id:t,taskId:s}=e;yield Object(M.b)(ce,t),yield Object(M.c)(S(e)),yield Object(M.b)(ie,{payload:s})}catch(t){u("Delete subTask request failed:",t)}}function*de(){yield Object(M.e)(x.type,ie),yield Object(M.e)(w.type,le),yield Object(M.f)(L.type,oe)}function*be(){yield Object(M.b)(X)}const je=Object(d.a)(B),ue=Object(b.a)({onError:(e,{sagaStack:t})=>{u("Something came up",e,t)}}),he=[...Object(l.d)({thunk:!1,serializableCheck:!1,immutableCheck:{warnAfter:300}}),je,ue],Oe=Object(l.a)({reducer:R,middleware:he,enhancers:[],preloadedState:{},devTools:{trace:!0}});ue.run((function*(){yield Object(M.f)("app/init",be),yield Object(M.a)([ae(),de()])}));var pe=Oe,ke=s(9);const ye=()=>"/";var fe=s(10);const me=fe.b.div.withConfig({displayName:"BorderedCenterArea"})(["width:500px;margin:20px auto;padding:20px;max-width:100%;border:1px dashed #a5a2a2;"]);var ge=s(2);var xe=({children:e})=>Object(ge.jsx)(me,{children:e}),Te=s(5),Ce=s.n(Te);const ve=fe.b.button.withConfig({displayName:"Wrapper"})(["padding:4px 6px;height:fit-content;border-radius:1em;background-color:#96fbe4;border:none;&.yellow-button{background-color:#ffe082;}"]);var we=e=>Object(ge.jsx)(ve,{...e});const Se={CREATE_TIME:"BY_CREATE_TIME",TITLE:"BY_TITLE"},Ie=Object(fe.b)(we).withConfig({displayName:"SortButton"})(["margin-right:5px;"]),Ee={[Se.CREATE_TIME]:"Sort by create-date",[Se.TITLE]:"Sort by title"};var Le=({sortType:e,sortBy:t})=>{const s=Object(a.useCallback)((()=>t(e)),[t,e]);return Object(ge.jsx)(Ie,{className:"yellow-button",onClick:s,children:Ee[e]})};const Ne=fe.b.input.attrs({type:"text"}).withConfig({displayName:"Input"})(["border-radius:1em;border:1px solid #656565;padding:2px 5px;"]),Be=({value:e,placeholder:t,onValueChange:s})=>{const[c,r]=Object(a.useState)(e),n=Object(a.useCallback)((e=>{r(e.target.value),s(e.target.value)}),[s]);return Object(a.useEffect)((()=>r(e)),[e]),Object(ge.jsx)(Ne,{placeholder:t,value:c,onChange:n})};Be.defaultProps={value:"",placeholder:""};var Re=Be;var Me=()=>Object(ge.jsx)("h1",{children:"Processes"});const Ae=fe.b.ul.withConfig({displayName:"ListContainter"})(["margin-left:10px;margin-bottom:5px;.item{margin-bottom:5px;}"]);var qe=({items:e,ItemComponent:t})=>Object(ge.jsx)(Ae,{children:e.map((e=>Object(ge.jsx)("li",{children:Object(ge.jsx)(t,{...e})},e.id)))});const Fe=fe.b.input.attrs({type:"checkbox"}).withConfig({displayName:"Checkbox"})(["margin-right:5px;"]),Pe=({onCheck:e,isUncheckable:t})=>{const[s,c]=Object(a.useState)(!1),r=Object(a.useCallback)((()=>{s||e(),c((e=>!!t||!e))}),[e,s,t]);return Object(ge.jsx)(Fe,{onChange:r,checked:s})};Pe.defaultProps={isUncheckable:!1};var _e=Pe;var De=({children:e})=>{const t=Object(i.e)(Y),s=new RegExp(`(${t})`,"gi"),a=e.split(s);return t?Object(ge.jsx)(ge.Fragment,{children:a.map(((e,t)=>{const a=s.test(e);return Object(ge.jsx)(c.a.Fragment,{children:a?Object(ge.jsx)("mark",{children:e}):e},t)}))}):e};const Je=fe.b.li.withConfig({displayName:"Label"})(["display:inline-block;margin-right:5px;padding:0 5px;border-radius:1em;background-color:#9c9cc7;color:#fff;"]),Qe=fe.b.ul.withConfig({displayName:"LabelsList"})(["margin:3px 0 10px;"]),$e=({id:e,title:t,labels:s,taskId:c})=>{const r=Object(i.d)(),n=Object(a.useCallback)((()=>r(w({id:e,taskId:c}))),[r,e,c]);return Object(ge.jsxs)("span",{children:[Object(ge.jsx)(_e,{onCheck:n,isUncheckable:!0}),Object(ge.jsx)("span",{id:e,children:Object(ge.jsx)(De,{children:t})}),Object(ge.jsx)(Qe,{children:s.map((e=>Object(ge.jsxs)(Je,{className:"label",children:["#",e]},e)))})]})};$e.defaultProps={labels:[]};Ce.a.string.isRequired,Ce.a.string.isRequired,Ce.a.string.isRequired,Ce.a.arrayOf(Ce.a.string);var ze=$e;var Ue=({taskId:e})=>{const t=((e,t)=>{const s=Object(a.useCallback)(e(...t),[e,...t]);return Object(i.e)(s)})(K,[e]);return Object(ge.jsx)(qe,{items:t,ItemComponent:ze})};const Ve=e=>{const t=new Date(e);return`${t.toLocaleDateString()} ${t.toLocaleTimeString()}`},We=(e,t,s)=>e.filter((e=>(e=>{return t=e,a="id",s.find((e=>e[a]===t[a]));var t,a})(e.id)||((e,t)=>e.find((e=>e.taskId===t)))(t,e.id))),Ye=fe.b.div.withConfig({displayName:"TaskWrapper"})(["display:flex;justify-content:space-between;"]),Ge=fe.b.span.withConfig({displayName:"TaskName"})(["flex-basis:40%;max-width:40%;overflow:hidden;text-overflow:ellipsis;"]);Ce.a.string.isRequired,Ce.a.string.isRequired,Ce.a.number.isRequired;var He=({title:e,id:t,createTime:s})=>{const c=Object(i.d)(),r=Object(a.useCallback)((()=>c(x(t))),[t,c]);return Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsxs)(Ye,{children:[Object(ge.jsx)(Ge,{children:Object(ge.jsx)(De,{children:e})}),Object(ge.jsx)("span",{children:Ve(s)}),Object(ge.jsx)(we,{onClick:r,children:"Expand"})]}),Object(ge.jsx)(Ue,{taskId:t})]})};const Ke=fe.b.div.withConfig({displayName:"ButtonContainer"})(["margin:5px 0;"]);var Xe=({sortBy:e})=>Object(ge.jsx)(Ke,{children:Object.values(Se).map((t=>Object(ge.jsx)(Le,{sortBy:e,sortType:t},t)))});const Ze=Object(V.a)(W,(e=>e.tasks.tasksList),(e=>e.tasks.foundTasksList),G,((e,t,s,a)=>e?We(t,a,s):t)),et={[Se.CREATE_TIME]:(e,t)=>e.createTime-t.createTime,[Se.TITLE]:(e,t)=>e.title<t.title?-1:1};var tt=e=>{const[t,s]=Object(a.useState)(Se.CREATE_TIME);return{sortedItems:((e,t)=>{const s=[...e];return s.sort(et[t]),s})(e,t),sortBy:s}};var st=()=>{const e=Object(i.e)(Ze),{sortedItems:t,sortBy:s}=tt(e);return Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)(Xe,{sortBy:s}),Object(ge.jsx)(qe,{items:t,ItemComponent:He})]})};const at=fe.b.div.withConfig({displayName:"TaskFormContainer"})(["& button{margin-left:5px;}"]),ct=({title:e})=>{const[t,s]=Object(a.useState)(e),c=Object(i.d)(),r=Object(i.e)(W),n=Object(a.useCallback)((()=>{c(k({title:t})),s("")}),[t,c]),o=Object(a.useCallback)((()=>{r?s(""):c(L(t)),c(E(!r))}),[c,r,t]),l=Object(a.useCallback)((e=>{s(e),r&&c(L(e))}),[r,c]);return Object(ge.jsxs)(at,{children:[Object(ge.jsx)(Re,{value:t,placeholder:"task title",onValueChange:l}),!r&&Object(ge.jsx)(we,{onClick:n,children:"Create"}),Object(ge.jsx)(we,{onClick:o,children:r?"Exit Search":"Start Search"})]})};ct.defaultProps={title:""};var rt=ct;var nt=()=>Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)(Me,{}),Object(ge.jsxs)("main",{children:[Object(ge.jsx)(rt,{}),Object(ge.jsx)(st,{})]})]});var it=()=>Object(ge.jsx)(xe,{children:Object(ge.jsx)(nt,{})}),ot=s(27);var lt=()=>Object(ge.jsxs)(xe,{children:[Object(ge.jsx)("h1",{children:"Page not found"}),Object(ge.jsx)(ot.a,{to:ye(),children:"Go to home"})]});var dt=()=>Object(ge.jsxs)(ke.c,{children:[Object(ge.jsx)(ke.a,{path:ye(),component:it}),Object(ge.jsx)(ke.a,{component:lt})]}),bt=Object(fe.a)(["*{padding:0;margin:0;outline:none;&,&:before,&:after{box-sizing:border-box;}}body{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:'Helvetica',sans-serif;font-weight:400;font-size:14px;line-height:1.4;}a{text-decoration:none;&,&:hover{color:inherit;}}p{margin:0;}ul,ol{margin:0;list-style:none;}img{max-width:100%;}h1,h2,h3,h4,h5,h6{margin:0;}pre{margin:0;}#root{height:100vh;display:flex;flex-direction:column;}"]);var jt=()=>(Object(a.useEffect)((()=>{pe.dispatch({type:"app/init"})}),[]),Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)(bt,{}),Object(ge.jsx)(i.a,{store:pe,children:Object(ge.jsx)(o.a,{history:B,children:Object(ge.jsx)(dt,{})})})]}));window.logError=alert,n.a.render(Object(ge.jsx)(c.a.StrictMode,{children:Object(ge.jsx)(jt,{})}),document.getElementById("root"))}},[[1550,1,2]]]);
//# sourceMappingURL=main.c1e3196b.chunk.js.map